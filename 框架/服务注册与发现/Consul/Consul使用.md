#### 1. 简介

---

Consul是HashiCrop公司推出的开源工具。

主要特性：

- 服务发现

  可以使用DNS或者HTTP接口。也可以注册外部服务比如SaaS提供商。Consul的客户端可以提供服务，例如API或者mysql，而其他客户端可以使用consul来发现给定服务的提供者。通过使用DNS或者HTTP，应用可以轻易的找到他们依赖的服务。

- 失败检测

- 多数据中心

  Consul很容易扩展到多个数据中心。可以在其他数据中心查找服务，或者保持请求本地。支持多数据中心意味着consul的用户不必担心构建额外的抽象层来扩展到多个地域。

- 键值对存储

  灵活的键值对存储，用于动态配置，特性标记，协调，leader选举等。支持Long poll用于配置变更的准实时通知。应用可以将consul的分层键值对存储用于任何目的。简单的HTTP API易于使用。

>**Consul架构**（分布式高可用）
>
>==每个提供服务给consul的节点都运行有一个consul的agent==。运行agent对于发现其他服务或者获取/设置键值数据并非必须。agent负责做节点上的服务的健康检查也包括节点自己。
>
>agent和一个或者多个consul server进行交互。数据存储并同步在consul server上。服务器自行选举一个leader。虽然consul可以单机工作，推荐3到5台consul以避免失败场景导致数据丢失。推荐每个数据中心一个consul服务器集群。
>
>需要发现其他服务或者节点的基础设施的组件可以查询任何consul服务器或者consul agent。agent自动将请求转发给服务器。
>
>每个数据中心运行consul服务器的一个集群。当跨数据中心的服务发现或者配置请求发生时，本地consul服务器转发请求到远程数据中心并返回结果。



#### 2. 安装Consul服务端

---

Consul和Eureka不同，Eureka只需要在项目中加入服务端依赖，就可以作为服务端使用；



































