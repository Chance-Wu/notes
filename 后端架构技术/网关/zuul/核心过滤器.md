### 一、pre过滤器

---

#### 1.1 ServletDetectionFilter

执行顺序为-3，是最先被执行的过滤器。

该过滤器总是会被执行，主要用来检测当前请求是通过Spring的DispatcherServlet处理运行的，还是通过ZuulServlet来处理运行的。

它的检测结果会以布尔类型保存在当前请求上下文的isDi spatcherServletRequest参数中,这样在后续的过滤器中，我们就可以通过RequestUtils. isDispatcherServletRequest () 和RequestUtils. isZuulServletRequest ()方法来判断请求处理的源头，以实现后续不同的处理机制。

一般情况下，发送到API网关的外部请求都会被Spring的DispatcherServlet 处理，除了通过/zuul/*路径访问的请求会绕过DispatcherServlet,被ZuulServlet处理，主要用来应对处理大文件上传的情况。另外，对于ZuulServlet的访问路径/zuul/*，我们可以通过zuul. servletPath参数来进行修改。





































































