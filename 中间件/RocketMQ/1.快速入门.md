#### 1. 准备工作

##### 1.1 环境要求

>- Linux64位系统
>- JDK 1.8
>- 源码安装需要Maven 3.2.x

##### 1.2 安装步骤

>1. [下载](https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.8.0/rocketmq-all-4.8.0-source-release.zip)、解压安装包
>2. 进入安装目录
>
>```bash
>  > unzip rocketmq-all-4.8.0-source-release.zip
>  > cd rocketmq-all-4.8.0/
>  > mvn -Prelease-all -DskipTests clean install -U
>  > cd distribution/target/rocketmq-4.8.0/rocketmq-4.8.0
>```

##### 1.3 启动name server

>```bash
>> nohup sh bin/mqnamesrv &
>> tail -f ~/logs/rocketmqlogs/namesrv.log
>```
>
>可以看到 ：The Name Server boot success...表示启动成功。

##### 1.4 启动broker

>RocketMQ默认的虚拟机内存较大，启动broker如果因为内存不足失败，需要编辑如下两个配置文件，修改jvm内存大小。
>
>```bash
>> vim runbroker.sh
>JAVA_OPT="${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m"
>> vim runserver.sh
>JAVA_OPT="${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"
>```
>
>```bash
>> nohup sh bin/mqbroker -n localhost:9876 &
>> tail -f ~/logs/rocketmqlogs/broker.log 
>```

##### 1.5 测试发送&接收消息

>在这之前，需要告诉客户单name server的位置。使用环境变量来实现。
>
>- 发送消息：
>
>```bash
>> export NAMESRV_ADD=localhost:9876
>> sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer
>```
>
>- 接收消息
>
>```bash
>> export NAMESRV_ADD=localhost:9876
>> sh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer
>```
>
>

##### 1.6 关闭rocketmq

>```bash
># 1.关闭NameServer
>> sh bin/mqshutdown namesrv
># 2.关闭broker
>> sh bin/mqshutdown broker
>```































































