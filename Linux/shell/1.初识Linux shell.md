Linux可以划分为以下四部分：

- Linux内核
- GNU工具
- 图形化桌面环境
- 应用软件

<img src="../../../../Pictures/assets/image-20220106133240679.png" alt="image-20220106133240679" style="zoom: 67%;" />

#### 1.1 深入探究Linux内核

---

内核控制着计算机系统上的所有硬件和软件，在必要时分配硬件，并根据需要执行软件。内核主要负责以下四种功能：

- 系统内存管理
- 软件程序管理
- 硬件设备管理
- 文件系统管理

##### 1.1.1 系统内存管理

操作系统内核的主要功能之一就是内存管理。内核不仅管理服务器上的==可用物理内存==，还可以==创建和管理虚拟内存==。

内核通过硬盘上的存储空间来实现虚拟内存，这块区域称为**交换空间（swap space）**。==内核不断地在交换空间和实际物理内存之间反复交换虚拟内存中的内容==。

<img src="https://tva1.sinaimg.cn/large/008i3skNgy1gy49n3686aj30hq0dw0tl.jpg" style="zoom: 67%;" />

内存存储单元按组划分成很多块，这些块称作**页面**（page）。内核将每个内存页面放在物理内存或交换空间。然后，==内核会维护一个内存页面表，指明哪些页面被换到了磁盘上==。

内核会记录哪些内存页正在使用中，并自动把一段时间未访问的内存页面复制到交换空间区域（称为换出）——即使还有可用内存。当程序要访问一个已被换出的内存页面时，内核必须从物理内存换出另外一个内存页面给它让出空间，然后从交换空间换入请求的内存页面。显然，这个过程要花费时间，拖慢运行中的进程。只要Linux系统在运行，为运行中的程序换出内存页面的过程就不会停歇。

##### 1.1.2 软件程序管理

Linux操作系统将运行中的程序称为**进程**。进程可以在前台运行，将输出显示在屏幕上，也可以在后台运行，隐藏到幕后。

==内核创建了第一个进程（称为init进程）来启动系统上所有其他进程==。当内核启动时，它会将init进程加载到虚拟内存中。内核在启动任何其他进程时，都会在虚拟内存中给新进程分配一块专有区域来存储该进程用到的数据和代码。

一些Linux发行版使用一个表来管理在系统开机时要自动启动的进程。在Linux系统上，这个 表通常位于专门文件`/etc/inittab`中。

另外一些系统(比如现在流行的Ubuntu Linux发行版)则采用`/etc/init.d`目录，将开机时启动 或停止某个应用的脚本放在这个目录下。这些脚本通过`/etc/rcX.d`目录下的入口(entry)1启动， 这里的X代表运行级(run level)。

Linux操作系统的init系统采用了运行级。运行级决定了init进程运行/etc/inittab文件或/etc/rcX.d目录中定义好的某些特定类型的进程。Linux操作系统有5个启动运行级。

运行级为1时，只启动基本的系统进程以及一个控制台终端进程。我们称之为**单用户模式**。 单用户模式通常用来在系统有问题时进行紧急的文件系统维护。显然，在这种模式下，仅有一个人(通常是系统管理员)能登录到系统上操作数据。

==标准的启动运行级是3==。在这个运行级上，大多数应用软件，比如网络支持程序，都会启动。 另一个Linux中常见的运行级是5。在这个运行级上系统会启动图形化的X Window系统，允许用户通过图形化桌面窗口登录系统。

Linux系统可以通过调整启动运行级来控制整个系统的功能。通过将运行级从3调整成5，系 统就可以从基于控制台的系统变成更先进的图形化X Window系统。

##### 1.1.3 硬件设备管理

内核的另一职责是管理硬件设备。任何Linux系统需要与之通信的设备，都需要在内核代码中加入其驱动程序代码。驱动程序代码相当于应用程序和硬件设备的中间人，允许内核与设备之间交换数据。在Linux内核中有两种方法用于插入设备驱动代码：

- **编译进内核的设备驱动代码**
- **可插入内核的设备驱动模块**

Linux系统将硬件设备当成特殊的文件，称为设备文件。设备文件有3钟分类：

- **字符型设备文件**：处理数据时每次只能处理一个字符的设备。大多数类型的调制解调器和终端都是作为字符型设备文件创建的。
- **块设备文件**：处理数据时每次能处理大块数据的设备，比如硬盘。
- **网络设备文件**：采用数据包发送和接收数据的设备，包括各种网卡和一个特殊的回环设备。这个回环设备允许Linux系统使用常见的网络编程协议同自身通信。

==Linux为系统上的每个设备都创建一种称为节点的特殊文件。与设备的所有通信都通过设备节点完成==。每个节点都有唯一的数值对供Linux内核标识它。==数值对包括一个主设备号和一 个次设备号==。类似的设备被划分到同样的主设备号下。次设备号用于标识主设备组下的某个特定设备。

##### 1.1.4 文件系统管理

Linux内核支持通过不同类型的文件系统从硬盘读写数据。除了自有的诸多文件系统外，Linux还支持从其他操作系统采用的文件系统中读写数据。内核必须在编译时就加入对所有可能用到的文件系统的支持。下表列出了Linux系统用来读写数据的标准文件系统。

| 文件系统 | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| ext      | Extended file system。Linux扩展文件系统，最早的Linux文件系统 |
| ext2     | 第二扩展文件系统，在ext的基础上提供了更多的功能              |
| ext3     | 第三扩展文件系统，支持日志功能                               |
| **ext4** | 第四扩展文件系统，支持高级日志功能                           |
| hpfs     | OS/2高性能文件系统                                           |
| jfs      | IBM日志文件系统                                              |
| iso9660  | ISO 9660文件系统（CD-ROM）                                   |
| minix    | MINIX文件系统                                                |
| msdos    | 微软的FAT16                                                  |
| ncp      | Netware文件系统                                              |
| **nfs**  | 网络文件系统                                                 |
| ntfs     | 支持Microsoft NT文件系统                                     |
| proc     | 访问系统信息                                                 |
| ReiserFS | 高级Linux文件系统，能提供更好的性能和硬盘恢复功能            |
| smb      | 支持网络访问的Samba SMB文件系统                              |
| sysv     | 较早期的Unix文件系统                                         |
| ufs      | BSD文件系统                                                  |
| umsdos   | 建立在msdos上的类Unix文件系统                                |
| vfat     | Windows 95文件系统（FAT32）                                  |
| XFS      | 高性能64位日志文件系统                                       |

Linux服务器所访问的所有硬盘都必须格式化成上表所列文件系统类型中的一种。

==Linux内核采用虚拟文件系统(Virtual File System，VFS)作为和每个文件系统交互的接口。== 这为Linux内核同任何类型文件系统通信提供了一个标准接口。当每个文件系统都被挂载和使用时，VFS将信息都缓存在内存中。

#### 1.2 GNU工具

---

除了由内核控制硬件设备外，操作系统还需要工具来执行一些标准功能，比如控制文件和 程序。
GNU组织(GNU是GNU’s Not Unix的缩写)开发了一套完整的Unix工具，但没有可以运行它们的内核系统。这些工具是在名为开源软件(open source software，OSS)的软件理念下开发的。开源软件理念允许程序员开发软件，并将其免费发布。任何人都可以使用、修改该软件，或 将该软件集成进自己的系统，无需支付任何授权费用。将Linus的Linux内核和GNU操作系统工具整合起来，就产生了一款完整的、功能丰富的免费操作系统。尽管通常将Linux内核和GNU工具的结合体称为Linux，但你也会在互联网上看到一些Linux 纯粹主义者将其称为GNU/Linux系统，藉此向GNU组织所作的贡献致意。

##### 1.2.1 核心GNU工具

GNU项目的主旨在于为Unix系统管理员设计出一套类似于Unix的环境。这个目标促使该项目移植了很多常见的Unix系统命令行工具。供Linux系统使用的这组核心工具被称为coreutils(core utilities)软件包。

**GNU coreutils软件包**由三部分构成：

- 用以==处理文件==的工具
- 用以==操作文本==的工具
- 用以==管理进程==的工具

##### 1.2.2 shell

**GNU/Linux shell是一种特殊的交互式工具**。它为用户提供了启动程序、管理文件系统中的文件以及运行在Linux系统上的进程的途径。==shell的核心是命令行提示符。命令行提示符是shell负责交互的部分。它允许你输入文本命令，然后解释命令，并在内核中执行==。

shell包含了一组内部命令，用这些命令可以完成诸如复制文件、移动文件、重命名文件、显 示和终止系统中正运行的程序等操作。shell也允许你在命令行提示符中输入程序的名称，它会将程序名传递给内核以启动它。

你也可以将多个shell命令放入文件中作为程序执行。这些文件被称作shell脚本。你在命令行 上执行的任何命令都可放进一个shell脚本中作为一组命令执行。这为创建那种需要把几个命令放 在一起来工作的工具提供了便利。

在Linux系统上，通常有好几种Linux shell可用。不同的shell有不同的特性，有些更利于创建脚本，有些则更利于管理进程。==所有Linux发行版默认的shell都是bash shell==。bash shell由GNU项目开发，被当作标准Unix shell——Bourne shell(以创建者的名字命名)的替代品。bash shell的名称就是针对Bourne shell的拼写所玩的一个文字游戏，称为Bourne again shell。

下表列出了Linux中常见的几种不同 shell。

| shell | 描述                                                         |
| ----- | ------------------------------------------------------------ |
| ash   | 一种运行在内存受环境中简单地轻量级shell，但与bash shell完全兼容 |
| korn  | 一种与Bourne shell兼容的编程shell，但支持如关联数组和浮点运算等一些高级的编程特性 |
| tcsh  | 一种将C语言中的一些元素引入到shell脚本中的shell              |
| zsh   | 一种结合了bash、tcsh和korn的特性，同时提供高级编程特性、共享历史文件和主题化提示符的高级 shell |

#### 1.3 Linux桌面环境

---



#### 1.4 Linux发行版

---

我们将完整的Linux系统包称为发行版。有很多不同的Linux发行版来满足可能存在的各种运 算需求。大多数发行版是为某个特定用户群定制的，比如商业用户、多媒体爱好者、软件开发人员或者普通家庭用户。每个定制的发行版都包含了支持特定功能所需的各种软件包，比如为多媒体爱好者准备的音频和视频编辑软件，为软件开发人员准备的编译器和集成开发环境(IDE)。

不同的Linux发行版通常归类为3种：

- 完整的核心Linux发行版
- 特定用途的发行版
- LiveCD测试发行版

##### 1.4.1 核心Linux发行版

核心Linux发行版含有内核、一个或多个图形化桌面环境以及预编译好的几乎所有能见到Linux应用。它提供了一站式的完整Linux安装。

| 发行版      | 描述                                             |
| ----------- | ------------------------------------------------ |
| Slackware   | 最早的Linux发行版中的一员，在Linux极客中比较流行 |
| **Red Hat** | 主要用于Internet服务器的商业发行版               |
| Fedora      | 从Red Hat分离出的家用发行版                      |
| Gentoo      | 为高级Linux用户设计的发行版，仅包含Linux源代码   |
| openSUSE    | 用于商用和家用的发行版                           |
| **Debian**  | 在Linux专家和商用Linux产品中流行的发行版         |

##### 1.4.2 特定用途的Linux发行版

Linux发行版的一个新子群已经出现了。它们通常基于某个主流发行版，但仅包含主流发行 版中一小部分用于某种特定用途的应用程序。

除了提供特定软件外(比如仅为商业用户提供的办公应用)，定制化发行版还尝试通过自动检测和自动配置常见硬件来帮助新手安装Linux。这使得Linux的安装过程轻松愉悦了许多。

| 发行版      | 描述                                         |
| ----------- | -------------------------------------------- |
| **CentOS**  | 基于Red Hat企业版Linux源代码构建的免费发行版 |
| **Ubuntu**  | 用于学校和家庭的免费发行版                   |
| PCLinuxOS   | 用于家庭和办公的免费发行版                   |
| Mint        | 用于家庭娱乐的免费发行版                     |
| dyne:bolic  | 用于音频和MIDI应用的免费发行版               |
| Puppy Linux | 适用于老旧PC的小型免费发行版                 |