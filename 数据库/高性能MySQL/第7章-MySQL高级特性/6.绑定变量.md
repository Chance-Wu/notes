MySQL 4.1开始，就支持服务器端的绑定变量（prepared statement），这大大提高了客户端和服务器端数据传输的效率。另外，Java和.NET的也都都可以使用各自的客户端来使用绑定变量。最后，还有一个SQL接口用于支持绑定变量。

当创建一个绑定变量SQL时，客户端向服务器发送了一个SQL语句的原型。服务器端收到这个SQL语句框架后，**解析并存储这个SQL语句的部分执行计划**，返回给客户端一个SQL**语句处理句柄**。以后每次执行这类查询，客户端都指定使用这个句柄。

绑定变量的SQL，==使用问好标记可以接受参数的位置==，当真正需要执行具体查询的时候，则使用具体执行代替这些问好。如下SQL语句：

```sql
INSERT INTO tb1(col1,col2,col3) VALUES(?,?,?);
```

可以通过向服务器端发送各个问号的取值和这个SQL的句柄来执行一个具体的查询。反复使用这样的方式执行具体的查询，这正是绑定变量的优势所在。

MySQL在使用绑定变量的时候可以更高效地执行大量的重复语句：

- 在服务器端只需要解析一次SQL语句；
- 在服务器端某些优化器的工作只需要执行一次，因为它会缓存一部分的执行计划；
- 以二进制的方式只发送参数和句柄，比起每次都发送ASCII码文本效率更高，一个二进制的日期字段只需要三个字节，但如果是ASCII码则需要十个字节。不过最大的节省还是来自于BLOB和TEXT字段，绑定变量的形式可以分块传输，而无需一次性传输。二进制协议在客户端也可能节省很多内存，减少了网络开销，另外，还节省了将数据从存储原始格式转换成文本格式的开销。
- 仅仅是参数——而不是整个查询语句——需要发送到服务器端，所以网络开销会更小。
- MySQL在存储参数的时候，直接将其存放到缓存中，不再需要在内存中多次复制。

绑定变量相对也更安全。无须在应用程序中处理转义，一则更简单了，二则也大大减少了SQL注入和攻击的风险。（任何时候都不要信任用户输入，即使是使用绑定变量的时候。）



#### 1. 绑定变量的优化

---

对使用绑定变量的SQL，MySQL能够缓存其部分执行计划，













































