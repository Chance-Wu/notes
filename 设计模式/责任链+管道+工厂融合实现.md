>基于责任链模式的流程处理框架，主要用于构建和执行一系列有序的任务（TransHandler），每个任务根据处理结果决定是否继续执行链中的下一个任务。此外，它还支持异步执行、异常处理回调等功能，广泛应用于需要灵活处理多个步骤的场景，如数据转换、事务处理等。

### 一、转换处理上下文接口

---

这里定义一个转换处理的上下文信息接口，实际使用中实现该接口来封装转换处理所需的全部数据。

```java
public interface TransHandlerContext {
}
```

提供上下文的基类实现，包含转换ID和转换器的字段。实现`TransHandlerContext`接口：

```java
@Data
public abstract class AbstractTransHandlerContext implements TransHandlerContext {

  /**
   * 转换ID
   */
  private String transId;

  /**
   * 转换器
   */
  private TransConvert transConvert;

}
```



### 二、数据转换接口

---

定义如何将请求转换为上下文以及上下文转换为响应的过程。

```java
public interface TransConvert {

  /**
   * 请求上下文转换
   *
   * @param req     请求
   * @param context 请求上下文
   * @return 转换上下文
   */
  TransHandlerContext requestContext(AbstractRequest req, TransHandlerContext context);

  /**
   * 上下文转响应
   *
   * @param context 请求上下文
   * @return 相应上下文
   */
  CommonRsp<T> convertContextToRsp(TransHandlerContext context);
}
```



### 三、转换回调接口定义

---

转换处理完成后的回调接口，允许在转换处理的不同阶段执行额外的逻辑，如日志记录、资源清理等。

```java
public interface TransCallback {

  /**
   * 回调处理方法
   *
   * @param context 上下文
   */
  void onDone(TransHandlerContext context);
}
```



### 四、转换处理器接口

---

该接口定义了转换处理器的基本行为：

1. 判断是否异步执行的方法。
2. 执行具体业务的方法吗，返回布尔值，指示是否应该继续执行链中的下一个处理器。

转换处理器负责处理特定的转换逻辑，可以通过实现此接口来扩展转换处理能力。

```java
public interface TransHandler {

  /**
   * 判断转换处理器是否以异步方式执行。
   *
   * @return true表示异步执行，false表示同步执行。
   */
  boolean isAsync();

  /**
   * 执行具体业务
   * 接收到转换请求后，会调用此方法来执行具体的转换逻辑。
   *
   * @param context 上下文（包含了转换的相关信息和状态）
   * @return true则继续执行下一个Handler，否则结束Handler Chain的执行直接返回
   */
  boolean handle(TransHandlerContext context);
}
```

抽象转换处理类，作为转换处理的基类，提供通用的处理逻辑和机制。该类为抽象类，不允许直接实例化，旨在被具体的转换处理类继承。

```java
public abstract class AbstractTransHandler implements TransHandler {

  /**
   * 日志记录器，用于记录类的运行时信息。
   */
  protected Logger LOGGER = LoggerFactory.getLogger(getClass());

  /**
   * 默认常量，用于指示默认的处理策略或配置。
   */
  public static final String DEFAULT = "default";

  /**
   * 获取转换回调对象。
   * 该方法提供了一个钩子，允许子类实现特定的转换回调逻辑。
   * 如果不需要特定的回调逻辑，子类可以重写此方法返回null。
   *
   * @return 可能的转换回调对象，如果没有特定的回调逻辑，则返回null。
   */
  public TransCallback getTransCallback() {
    return null;
  }
}
```



### 五、责任链节点

---

定义责任链中的节点，每个节点包含一个`TransHandler`（转换处理器）以及指向下一个节点的引用。实现交换处理逻辑的执行，并通过调用handle方法处理上下文，之后根据处理结果决定是否继续执行链中的下一个节点。

```java
public class TransHandlerNode {

  /**
   * 日志
   */
  private static final Logger LOGGER = LoggerFactory.getLogger(TransHandlerNode.class);

  /**
   * 处理逻辑
   */
  private TransHandler transHandler;

  /**
   * 下一个节点
   */
  private TransHandlerNode next;

}
```



### 六、转换流水线接口

---

定义转换处理流水调用接口：提供启动、终止交易处理流程以及获取上下文信息的方法。

```java
public interface TransProcessPipelineInvoker {

  /**
   * 启动流程
   */
  void start();

  /**
   * 终止流程
   */
  void shutDown();

  /**
   * 用于获取返回值
   *
   * @return 取得上下文
   */
  <T extends TransHandlerContext> T getContext();

}
```

定义流水线接口：提供向流水线中添加处理事件的能力，包括在头部和尾部添加处理事件。

```java
public interface TransPipeline extends TransProcessPipelineInvoker {

  /**
   * 将转换处理事件添加到头位置
   *
   * @param handlers 事件处理handler集合
   */
  void addFirst(TransHandler... handlers);

  /**
   * 将转换处理事件添加到尾为止
   *
   * @param handlers 事件处理handler集合
   */
  void addLast(TransHandler... handlers);
}
```























用于执行流水线任务。包含一个处理程序handler和指向下一个节点的链接next。主要功能有：

1. 



















































































