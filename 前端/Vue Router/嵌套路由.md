Vue Router 的嵌套路由允许**在一个父路由下定义子路由**，从而**实现页面结构的嵌套和组件的复用**。这在构建具有层级关系的 Web 应用时非常有用，例如后台管理系统、多级菜单等。

### 一、核心概念

---

嵌套路由的核心是 `children` 属性，在父路由的配置对象中，`children` 属性是一个路由配置数组，用于定义该父路由下的所有子路由。父组件需要包含 `<router-view>` 组件，用于渲染匹配到的子路由组件。



### 二、示例

---

假设有一个用户管理页面，包含用户列表和用户详情两个子页面。

#### 2.1 定义路由配置

`router/index.js` 或 `router/index.ts`

```javascript
import { createRouter, createWebHistory } from 'vue-router';
import Users from '../views/Users.vue'; // 父组件
import UserList from '../components/UserList.vue'; // 子组件
import UserDetail from '../components/UserDetail.vue'; // 子组件

const routes = [
  {
    path: '/users', // 父路由路径
    component: Users, // 父路由组件
    children: [ // 子路由配置
      {
        path: '', // 默认子路由，当访问 /users 时渲染
        name: 'userList', // 命名路由，方便跳转
        component: UserList,
      },
      {
        path: ':id', // 动态路由参数，例如 /users/123
        name: 'userDetail',
        component: UserDetail,
      },
    ],
  },
    // 其他路由...
];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

export default router;
```

#### 2.2 父组件

Users.vue

```vue
<template>
  <div>
    <h1>用户管理</h1>
    <nav>
      <router-link to="/users">用户列表</router-link> |
      <router-link :to="{ name: 'userDetail', params: { id: 1 } }">用户详情</router-link>
    </nav>
    <router-view></router-view> <div class="message">我是父组件的内容，子组件会渲染在router-view中</div>
  </div>
</template>
```

#### 2.3 子组件UserList.vue

```vue
<template>
  <div>
    <h2>用户列表</h2>
    <ul>
      <li>用户 1</li>
      <li>用户 2</li>
      <li>用户 3</li>
    </ul>
  </div>
</template>
```

#### 2.4 子组件UserDetail.vue

```vue
<template>
  <div>
    <h2>用户详情</h2>
    <p>用户 ID：{{ $route.params.id }}</p>
  </div>
</template>
```



### 三、注意事项

---

- **children 数组：** 用于定义子路由，其元素是路由对象，配置方式与顶级路由相同。
- **<router-view> 组件：** 必须在父组件中使用 `<router-view>` 才能渲染匹配的子路由组件。
- **相对路径：** 子路由的 `path` 是相对于父路由的。例如，在上述例子中，访问 `/users/123` 时，Vue Router 会先匹配到 `/users`，然后在 `Users` 组件内部的 `<router-view>` 中渲染 `UserDetail` 组件。
- **默认子路由：** 当访问父路由但没有指定子路由时，会渲染 `path` 为空字符串的子路由。例如，访问 `/users` 会渲染 `UserList` 组件。
- **命名路由：** 使用 `name` 属性给路由命名，方便通过 `router-link` 的 `to` 属性或编程式导航进行跳转，避免硬编码路径。
- **动态路由参数：** 使用 `:` 符号定义动态路由参数，例如 `:id`。在组件内部，可以通过 `$route.params.id` 访问参数值。
- **绝对路径与相对路径：**
  - 子路由的 `path` 如果以 `/` 开头，则会被视为绝对路径，相对于根路径。例如，如果一个子路由的 `path` 是 `/profile`，那么无论其父路由是什么，访问路径都将是 `/profile`。
  - 子路由的 `path` 如果不以 `/` 开头，则会被视为相对路径，相对于父路由。这是推荐的用法，可以更好地维护路由结构。



### 四、更深层次的嵌套

---

嵌套路由可以多层嵌套，形成更复杂的层级结构。例如：

```javascript
const routes = [
  {
    path: '/admin',
    component: Admin,
    children: [
      {
        path: 'users', // 相对路径，实际路径为 /admin/users
        component: AdminUsers,
        children: [
          {
            path: ':id', // 相对路径，实际路径为 /admin/users/:id
            component: AdminUserDetail,
          },
        ],
      },
    ],
  },
];
```



### 五、忽略父组件(Vue Router 4.1+)

---

从 Vue Router 4.1 开始，可以利用路由的父子关系，但不一定需要嵌套路由组件。这对于将具有公共路径前缀的路由分组在一起或使用更高级的功能（例如路由独享的守卫或路由元信息）时很有用。

在这种情况下，父路由不需要 `component` 属性。当访问子路由时，顶级 `<router-view>` 将跳过父级并仅使用子路由组件。

```javascript
const routes = [
  {
    path: '/admin', // 父路由，没有 component
    children: [
      {
        path: 'dashboard', // 实际路径为 /admin/dashboard
        component: AdminDashboard,
      },
      {
        path: 'settings', // 实际路径为 /admin/settings
        component: AdminSettings,
      },
    ],
  },
];
```

在这个例子中，访问/admin/dashboard或/admin/settings时，只会渲染AdminDashboard或AdminSettings组件，而不会渲染任何父组件。



































































