主流的前端包管理工具有 npm、yarn、pnpm、以及国内的镜像 cnpm、tyarn 等，这是包管理器都是基于 nodejs。



### 一、npm

---

NPM是Node.js的包管理器工具，是js开发人员共享打包的代码模块，是前端web应用程序等的开放源代码包的公共集合，npm也是命令行客户端开发人员用来安装和发布这些软件包的工具，npm.Inc是负责托管和维护上述所有内容的公司。

#### 1.1 起源

npm是2010年发布的nodejs 依赖管理工具，在此之前，前端的依赖管理都是手动下载和管理的。

#### 1.2 优点

npm是一个成熟、稳定、并且有趣的包管理器。提供了一个非常有用的解决方案，支持大量的测试用例。

#### 1.3 缺点

- 下载速度慢
- 安装速度慢
- 下载版本不一致



### 二、yarn

---

yarn是安装和共享代码的软件包管理工具，也是项目管理工具，无论是小型项目还是大型单体仓库（monorepos），无论是业余爱好者，还是企业用户，Yarn都能满足需求。它可以通过插件扩展，稳定，有很好的文档记录，免费和开源。yarn 是经过重新设计的崭新的 npm 客户端，它能让开发人员并行处理所有必须的操作，并添加了一些其他改进。运行速度得到了显著的提升，整个安装时间也变得更少。

#### 2.2 起源

yarn 是 Facebook 于 2016 年 发布的替代 npm 的包管理工具，还可以作为项目管理工具，定位是快速、可靠、安全的依赖管理工具。

#### 2.2 优点

- 运行速度获得了显著的提高，整个安装时间也变得更少。
- 像npm一样，yarn使用本地缓存。与npm不一样的是，yarn无需互联网链接就能安装本地缓存的依赖项，它提供了离线模式。这个功能在2012年的npm项目中就被提出来过，但一直没有实现。
- 容许合并项目中使用到的全部的包的许可证。

#### 2.3 缺点

- **存在幽灵依赖**。
- 提升的依赖依然复制多份的问题。



### 三、pnpm

---

pnpm 是一个速度快、磁盘空间大的软件包管理器。pnpm 使用内容可寻址文件系统将所有模块目录中的所有文件存储在磁盘上。使用 npm 或 Yarn 时，如果你有 100 个项目使用 lodash，则磁盘上将有 100 个 lodash 副本。使用 pnpm，lodash 将存储在内容可寻址的存储中。

#### 3.1 起源

是 2017 年发布的一款替代 npm 包管理工具，具有速度快、节省磁盘空间的特点。它的大部分功能与npm相同，由于其特殊的工作机制，它可以极大地提高包安装和卸载的速度。

#### 3.2 优点

- **pnpm运行起来非常的快**，超过了npm和yarn。
- pnpm采用了一种巧妙的方法，利用硬链接和符号链接来避免复制所有本地缓存源文件，这是yarn的最大的性能弱点之一。
- pnpm继承了yarn的所有优点，包括离线模式和确定性安装。
- pnpm 内置了对单个源码仓库中包含多个软件包的支持。
- **pnpm 创建的 node_modules 并非扁平结构**，因此代码不能对任意软件包进行访问。

> **注：**pnpm解决了yarn存在的问题。 如果你需要一个可靠且稳定的包管理工具，并且你的项目是大型的企业级应用程序，则应使用npm或者pnpm
>
> - 快速。比替代方案快 2 倍（参见基准测试）
> - 高效。node_modules 内的文件是由一个可寻址的内容存储空间链接的。
> - 非常适合 monorepos。
> - 严格。一个包只能访问其 package.json 中指定的依赖关系。
> - 确定性的。有一个名为 pnpm-lock.yaml 的 lockfile。
> - 在任何地方都适用。支持 Windows、Linux 和 macOS。
> - 久经沙场。自 2016 年以来被各种规模的团队在生产中使用。

#### 3.3 缺点

对老旧存量项目迁移pnpm可能需要踩坑。



### 四、Bower

---

Bower是一个客户端技术的软件包管理器，基于nodejs的静态资源管理工具。它可用于搜索、安装和卸载如JavaScript、HTML、CSS之类的网络资源，Bower管理的基本上都是前端工程师使用。它擅长前端的包管理，通过其API展示了包依赖模型。使得项目不存在系统级的依赖，不同的应用程序间也不会共享依赖，整个依赖树是扁平的。

#### 4.1 起源

Bower 是 twitter 推出的一款包管理工具，基于nodejs的模块化思想，把功能分散到各个模块中，让模块和模块之间存在联系，通过 Bower 来管理模块间的这种联系，其主要作用就是：为模块的安装、升级和删除，提供一种统一的、可维护的管理模式。

#### 4.2 优点

约束松散，使用简单，可用模块众多。

#### 4.3 缺点

对包结构没有强制规范，也因此bower本身并没有提供一套构建工具（当前应该能从社区中找到针对bower的构建工具），它充当的基本上是一个静态资源的共享平台。另外，直接在bower上安装模块稳定性难以保证（源的稳定性，以及国内网速的稳定性）。

不过如果是公司级别内部使用的话，结合公司本身的git仓库，并创建一个私有的bower server，并定制一套规范和打包工具，也是可行的。



### 五、参考资料

---

[1] [npm中文文档 | npm中文网](https://www.npmjs.cn/)

[2] [cnpm - npm](https://www.npmjs.com/package/cnpm)

[3] [Home | Yarn - JavaScript 软件包管理器 | Yarn中文文档 - Yarn中文网](https://www.yarnpkg.cn/)

[4] [pnpm - 速度快、节省磁盘空间的软件包管理器 | pnpm中文文档 | pnpm中文网](https://www.pnpm.cn/)

