### 一、简介

---

**REST**（Representational State Transfer）是一种**架构风格**，用于设计网络应用程序的接口。

**RESTful API** 是指遵循 REST 原则构建的 Web API，通常基于 HTTP 协议，使用标准方法和状态码进行通信。

> 核心思想：把服务器上的资源（Resource）通过 URI 标识，并用统一的接口（HTTP 方法）对其进行操作。



### 二、六大核心原则

---

| 原则                                 | 说明                                           |
| ------------------------------------ | ---------------------------------------------- |
| **客户端-服务器分离**                | 前后端解耦，各自独立演进                       |
| **无状态（Stateless）**              | 每个请求包含所有必要信息，服务器不保存会话状态 |
| **可缓存（Cacheable）**              | 响应应标明是否可缓存，提升性能                 |
| **统一接口（Uniform Interface）**    | 使用标准 HTTP 方法和 URI 设计资源操作          |
| **分层系统（Layered System）**       | 支持代理、网关、负载均衡等中间件               |
| **按需代码（Code-on-Demand，可选）** | 服务器可临时扩展客户端功能（如返回脚本）       |



### 三、核心设计规范

---

#### 3.1 URI 设计规范

- URI 应表示**资源**，而非操作。
- 使用名词（复数），避免动词。
- 层级清晰，使用 `/` 分隔。

```
GET    /users              # 获取用户列表
GET    /users/123          # 获取 ID 为 123 的用户
POST   /users              # 创建新用户
PUT    /users/123          # 更新用户（全量）
PATCH  /users/123          # 更新用户（部分）
DELETE /users/123          # 删除用户
GET    /users/123/orders   # 获取某用户的所有订单
```

#### 3.2 HTTP方法映射

| 方法      | 用途                  | 幂等性       | 安全性               |
| --------- | --------------------- | ------------ | -------------------- |
| `GET`     | 查询资源              | ✅ 幂等       | ✅ 安全（不修改数据） |
| `POST`    | 创建资源 或 执行操作  | ❌ 不幂等     | ❌ 不安全             |
| `PUT`     | 全量更新资源          | ✅ 幂等       | ❌ 不安全             |
| `PATCH`   | 部分更新资源          | ❌ 通常不幂等 | ❌ 不安全             |
| `DELETE`  | 删除资源              | ✅ 幂等       | ❌ 不安全             |
| `HEAD`    | 获取响应头（无 body） | ✅            | ✅                    |
| `OPTIONS` | 获取资源支持的方法    | ✅            | ✅                    |

#### 3.3 请求与响应格式

**请求格式（Content-Type: `application/json`）**

```json
{
  "name": "张三",
  "email": "zhangsan@example.com"
}
```

**响应格式（统一结构推荐）**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 123,
    "name": "张三",
    "email": "zhangsan@example.com",
    "createdAt": "2025-04-05T10:00:00Z"
  }
}
```

建议字段：

- `code`: 业务状态码（非 HTTP 状态码）
- `message`: 提示信息
- `data`: 返回的数据主体

#### 3.4 HTTP 状态码规范使用

| 状态码                      | 含义             | 使用场景                             |
| --------------------------- | ---------------- | ------------------------------------ |
| `200 OK`                    | 请求成功         | `GET`, `PUT`, `PATCH`, `DELETE` 成功 |
| `201 Created`               | 资源创建成功     | `POST` 成功，应返回 `Location` 头    |
| `204 No Content`            | 成功但无返回内容 | `DELETE` 成功或 `PUT/PATCH` 无需返回 |
| `400 Bad Request`           | 客户端请求错误   | 参数缺失、格式错误                   |
| `401 Unauthorized`          | 未认证           | 缺少 Token 或 Token 无效             |
| `403 Forbidden`             | 无权限           | 用户无权访问该资源                   |
| `404 Not Found`             | 资源不存在       | URI 路径错误或资源已删除             |
| `405 Method Not Allowed`    | 方法不支持       | 如对 `/users` 使用 `DELETE`          |
| `409 Conflict`              | 冲突             | 如创建重复用户名                     |
| `422 Unprocessable Entity`  | 语义错误         | 参数验证失败（常用于 `POST/PATCH`）  |
| `429 Too Many Requests`     | 请求过于频繁     | 限流触发                             |
| `500 Internal Server Error` | 服务器内部错误   | 未捕获异常                           |
| `503 Service Unavailable`   | 服务不可用       | 维护或过载                           |

#### 3.5 版本控制

建议在 URI 或 Header 中指定 API 版本：

```
GET /v1/users
GET /v2/users
```