响应式网站开发（Responsive Web Design, RWD）旨在使网页在不同设备（桌面、平板、手机等）上都能提供良好的视觉和交互体验。其核心技术围绕**灵活的布局、可变的图像和智能的断点控制**展开。

### 一、响应式设计三大核心原则

---

- 流式布局（Fluid Grids）

  使用相对单位（如 `%`, `vw`, `vh`, `fr`）代替固定像素（`px`），使布局随容器大小自适应。

- 弹性图片（Flexiable Images）

  图片和媒体内容能自动缩放，不超出容器。

- 媒体查询（Media Queries）

  根据设备特性（如屏幕宽度、分辨率）应用不同的 CSS 样式。



### 二、关键技术实现

---

#### 2.1 视口设置

确保移动设备正确缩放页面。

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

- `width=device-width`：页面宽度等于设备屏幕宽度
- `initial-scale=1.0`：初始缩放比例为1

> ✅ 必须添加，否则移动端会以桌面宽度渲染，出现横向滚动。

#### 2.2 流式网格布局

1. 使用百分比

   ```css
   .container {
     width: 100%;
     max-width: 1200px;
     margin: 0 auto;
   }
   
   .column {
     width: 30%; /* 相对于父容器 */
     float: left;
     margin-right: 2%;
   }
   .column:last-child {
     margin-right: 0;
   }
   ```

2. 现代布局：Flexbox

   ```css
   .flex-container {
     display: flex;
     flex-wrap: wrap;
   }
   
   .flex-item {
     flex: 1 1 300px; /* grow, shrink, min-width */
   }
   ```

3. 现代布局：CSS Grid

   ```css
   .grid-container {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
     gap: 20px;
   }
   ```

>✅ `minmax(300px, 1fr)`：每列最小300px，最大1份，自动换行。

#### 2.3 弹性图片与媒体

```css
img, video, iframe {
  max-width: 100%;
  height: auto;
  display: block;
}
```

- `max-width: 100%`：确保不超出父容器
- `height: auto`：保持宽高比

响应式图片（`<picture>` 和 `srcset`）

根据设备分辨率加载不同图片：

```html
<picture>
  <source media="(max-width: 768px)" srcset="mobile.jpg">
  <source media="(max-width: 1200px)" srcset="tablet.jpg">
  <img src="desktop.jpg" alt="响应式图片">
</picture>

<!-- 或使用 srcset -->
<img src="small.jpg" 
     srcset="medium.jpg 1000w, large.jpg 2000w"
     sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
     alt="多分辨率图片">
```

#### 2.4 媒体查询

用于在不同屏幕尺寸下应用不同样式。

常见断点（Breakpoints）

```css
/* 移动优先（Mobile-First） */
.container {
  padding: 10px;
}

/* 平板（横向） */
@media (min-width: 768px) {
  .container {
    padding: 20px;
  }
}

/* 桌面 */
@media (min-width: 1024px) {
  .container {
    max-width: 1000px;
    margin: 0 auto;
  }
}

/* 大屏 */
@media (min-width: 1200px) {
  .container {
    max-width: 1200px;
  }
}
```

>推荐使用移动优先策略：先写移动端样式，再通过 min-width 逐步增强。

常用媒体特性

| 特性                     | 示例                               | 说明                |
| ------------------------ | ---------------------------------- | ------------------- |
| `width` / `height`       | `(max-width: 768px)`               | 视口宽高            |
| `orientation`            | `(orientation: portrait)`          | 横屏/竖屏           |
| `resolution`             | `(min-resolution: 2dppx)`          | 高DPI屏幕（Retina） |
| `hover`                  | `(hover: hover)`                   | 支持悬停的设备      |
| `prefers-color-scheme`   | `(prefers-color-scheme: dark)`     | 用户偏好深色模式    |
| `prefers-reduced-motion` | `(prefers-reduced-motion: reduce)` | 减少动画            |

#### 2.5 移动有限 vs 桌面优先

| 策略         | 写法                      | 优点                                 |
| ------------ | ------------------------- | ------------------------------------ |
| **移动优先** | `@media (min-width: ...)` | 更符合现代用户习惯，小屏样式优先加载 |
| **桌面优先** | `@media (max-width: ...)` | 适合以桌面为主的复杂系统             |

> ✅ 当前推荐：**移动优先**，更符合“渐进增强”理念。



### 三、现代响应技术

---

#### 3.1 CSS 自定义属性（Variables）+ 媒体查询

动态控制响应式变量：

```css
:root {
  --gap: 1rem;
  --sidebar-width: 100%;
}

@media (min-width: 768px) {
  :root {
    --gap: 2rem;
    --sidebar-width: 300px;
  }
}

.main {
  margin: var(--gap);
}
```

#### 3.2 容器查询（Container Queries）（新兴技术）

允许组件根据**自身容器**尺寸响应，而非整个视口。
```css
.widget {
  container-type: inline-size;
  container-name: sidebar;
}

@container sidebar (min-width: 300px) {
  .widget {
    display: flex;
  }
}
```

>优势：真正实现“组件级响应式”，适合微前端、CMS 系统。

#### 3.3 相对单位

| 单位            | 说明                          | 适用场景               |
| --------------- | ----------------------------- | ---------------------- |
| `rem`           | 相对于根字体大小（`html`）    | 字体、间距（全局控制） |
| `em`            | 相对于父元素字体大小          | 局部缩放               |
| `vw` / `vh`     | 视口宽度/高度的1%             | 全屏布局、背景         |
| `vmin` / `vmax` | 取 `vw` 和 `vh` 的最小/最大值 | 适配极端屏幕           |
| `ch`            | 当前字体的“0”字符宽度         | 文本对齐               |
| `fr`            | Grid 布局中的“分数单位”       | 网格分配               |

#### 3.4 响应式排版

字体大小随视口平滑变化。

使用 clamp() 函数（推荐）

```css
h1 {
  font-size: clamp(1.5rem, 2.5vw, 3rem);
  /* 最小值, 理想值, 最大值 */
}
```

使用 CSS 数据函数

```css
body {
  font-size: calc(16px + (20 - 16) * (100vw - 320px) / (1200 - 320));
}
```



### 四、响应式导航

---

#### 4.1 移动菜单

```html
<nav>
  <button class="menu-toggle">☰</button>
  <ul class="nav-menu">
    <li><a href="#">首页</a></li>
    <li><a href="#">产品</a></li>
  </ul>
</nav>
```

```css
.nav-menu {
  display: flex;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: -100%;
  transition: left 0.3s;
}

.nav-menu.active {
  left: 0;
}

@media (min-width: 768px) {
  .nav-menu {
    position: static;
    flex-direction: row;
    display: flex;
  }
}
```