### 一、相关概念

#### 临界资源

诸进程间需要互斥方式对其进行共享的资源，如打印机，磁带机等。

#### 临界区

每个进程中访问临界资源的那段代码称为临界区。

#### 信号量

是一种特殊的变量，**符号为s**，只用于pv操作。



### 二、p操作

---

<img src="https://img-blog.csdnimg.cn/20210223005516600.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ltcmVhbF8=,size_16,color_FFFFFF,t_70" alt="img" style="zoom:50%;" />

S代表信号量，该操作表示：S自减一，然后判断是否小于零，若小于零则将该进程阻塞起来，并将其放入进程队列中，让进程处于等待状态，若不小于零，则表示可以往下面执行；该操作即为将进程”挂起“或“申请资源”，该操作一般用于“运行需要条件的操作”。



### 三、v操作

---

<img src="5.%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-pv%E6%93%8D%E4%BD%9C.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ltcmVhbF8=,size_16,color_FFFFFF,t_70-20220805142818915.jpeg" alt="img" style="zoom:50%;" />

S自增一，然后判断S是否小于等于零，若是，则从进程队列中拿出一个进程，并唤醒该进程，使其继续执行；若不是，则可以继续往下面的步骤执行；该操作即将进程“唤醒”或“释放资源”，一般将该操作用于“没有任何约束的上来就可以运行的操作”。



### 四、pv操作实例

---

<img src="5.%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-pv%E6%93%8D%E4%BD%9C.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ltcmVhbF8=,size_16,color_FFFFFF,t_70-20220805143504369.jpeg" alt="img" style="zoom: 33%;" />

该图为单缓存区下生产者与消费者在市场消费中的pv模式图，生产者的操作有：生产产品，送产品到缓存区；消费者的操作有：从缓存区取产品，消费产品；在这个模型中加入了pv操作后极大的提高了模型的效率，其中p(s1)表示将S1的值代入p操作，V(s2)表示将S2的值代入v操作。

>pv操作的根本目的是为了**解决两个或多个进程运行时的约束关系造成的麻烦**，如上例中的单缓存区市场消费问题；此外，==有制约关系的操作双方信号量相同==。



### 五、pv操作与前趋图

---

pv操作与前趋图结合起来考察。

<img src="5.%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-pv%E6%93%8D%E4%BD%9C.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ltcmVhbF8=,size_16,color_FFFFFF,t_70-20220805144606241.jpeg" alt="img" style="zoom: 33%;" />

通过观察箭头的指向来解题，被指箭头就用v操作，有几个箭头就用几次。