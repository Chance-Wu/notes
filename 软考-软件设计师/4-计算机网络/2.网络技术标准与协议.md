### 一、概念

---

![img](2.%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E6%A0%87%E5%87%86%E4%B8%8E%E5%8D%8F%E8%AE%AE.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ltcmVhbF8=,size_16,color_FFFFFF,t_70-20220816221502410.jpeg)

1. IGMP：称之为因特网的控制协议
2. ARP：地址解析协议（即IP转MC）
3. RARP：反向地址解析协议（MC转IP）
4. TCP：可靠的协议，因其在通信时**会建立连接**(通过三次握手来建立连接，即A与B三次互发信息)，且**在传输信息时有验证机制**，以验证数据包是否顺利传输，其上方的FTP，Telnet等协议都是建立在TCP基础上的。
5. UDP：不可靠的协议，其在建立时不会建立连接，其在传输数据时，会直接将数据发送给另一方。
6. DHCP：用来做动态的IP地址的分配工作
7. TFTP：小文件传输协议
8. SNMP：简单的网络管理协议
9. DNS：域名解析协议
10. 位于中间部分的Samba协议、CIFS协议、NFS协议则是可基于两种基本协议
11. TCP和UDP均提供了端口寻址能力
12. MIML：是一个互联网标准，扩展了电子邮箱标准，使其能够支持电子邮箱的使用
13. PGP：一套用于信息加密、验证的应用程序，可用于加密电子邮件内容
14. HTTPS：HTTP的安全版，在HTTP的基础上加上了**SSL协议**，**SSL依靠证书来验证服务器的身份**，并为浏览器和服务器之间的通信加密



### 二、常用的端口号

---

#### 2.1 使用TCP协议常见端口

1. FTP——文件传输协议——21
2. Telnet——远程登录协议——23
3. SMTP——简单邮件传送协议——25
4. POP3——接收邮件——110
5. HTTP——超文本传输协议——80

#### 2.2 使用UDP协议常见端口

1. DNS——域名解析服务——53
2. SNMP——简单网络管理协议——161
3. TFTP——简单文本传输协议——69



### 三、DHCP协议

---

#### 3.1 概念

负责动态的分配IP地址，客户机在接入网络之后，==向DHCP服务器提出IP地址的分配请求==，服务器会根据网络IP地址资源情况给客户机分配IP地址。

1. 客户机/服务器模型
2. 租约默认为8天
3. 当租约过半时，客户机需要向DHCP服务器申请续租
4. 当租约超过87.5%时，如果仍然没有和当初提供IP的DHCP服务器联系上，则开始联系其他的DHCP服务器
5. 固定分配、动态分配和自动分配
6. 169.254.X.X 和 0.0.0.0

DHCP服务器向客户机分配的IP地址会有租约，租约默认为八天，若客户机的地址一直未改变，DHCP服务器就会将之前的IP地址重新分配给客户机，而DHCP服务器的分配方式则有三种：固定分配，动态分配，自动分配；较特殊的IP地址： 

169.254.X.X(windows系统中分配该IP)；0.0.0.0(lilux系统中分配该IP）,这两个IP地址称之为假地址，即**未与DHCP服务器连接上时即会被分配这两个地址**。

#### 3.2 windows中有关DHCP服务的命令

| 命令             | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| ipconfig         | 显示信息                                                     |
| ipconfig/all     | 显示详细信息，可查看DHCP服务是否已启用以及显示它已配置且所要使用的附加信息(如IP地址等),并且显示内置于本地网卡中的物理地址 |
| ipconfig/renew   | 更新所有适配器，即重新申请IP地址                             |
| ipconfig/release | 释放所有匹配的连接(IP地址)，只能再向DHCP服务器租用其IP地址的计算机上起作用 |



### 四、DNS协议

---

==IP地址是唯一标识计算机的方式==，而一大串数字对于用户的记忆并不友好，域名的出现就是为了解决这个问题，而DNS服务器则是负责将域名转为IP地址。

#### 4.1 查询域名的基本方式

1. 递归查询：如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份， 向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。
2. 迭代查询：
   1. 当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。(一问一答)
   2. 然后让本地服务器进行后续的查询。根域名服务器通常是把自己知道的顶级域名服务器的IP地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。
   3. 顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的IP地址，要么告诉本地服务器下一步应当向哪一个权限域名服务器进行查询。
   4. 最后，知道了所要解析的IP地址或报错，然后把这个结果返回给发起查询的主机。

>注：
>
>1. 主机向本地域名服务器的查询一般都是采用递归查询。
>2. 本地域名服务器向根域名服务器的查询采用迭代查询。

#### 4.2 DNS服务器域名请求流程

1. 客户机提出域名请求，并将该请求发送给本地的域名服务器；
2. 当本地的域名服务器收到请求后，就先查询本地的缓存，如果有该记录项，则本地域名服务器就直接把查询的结果返回；
3. 如果本地的缓存中没有该记录，则本地域名服务器就直接把请求发给根域名服务器，然后根域名服务器再返回给本地域名服务器一个所查询的域(根的子域)的主域名服务器的地址；
4. 本地服务器再向上一步返回的域名服务器发送请求，然后接收请求的服务器查询自己的缓存，如果没有记录，则返回相关的下级的域名服务器的地址；
5. 重复第四步，直到找到正确的记录；
6. 本地域名服务器把返回的结果保存到缓存，以备下一次使用，同时还将返回结果到客户机。

#### 4.3 Hosts

是一个没有扩展名的系统文件，可以用记事本打开，其作用就是将一些常用的网址与其对应的IP地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，==系统会首先自动从Hosts文件中寻找对应的IP地址==，一旦找到，系统会立即打开对应网页，如果没有找到，系统将会把网址提交给DNS域名解析服务器进行IP地址的解析。

注意：Hosts文件配置的映射是静态的，如果网络上的计算机更改了请及时更新IP地址，否则不能访问。

#### 4.4 诊断DNS故障的命令

| 命令     | 说明                                              |
| -------- | ------------------------------------------------- |
| nslookup | 检测网络中DNS服务器是否能正确实现域名的命令行工具 |
| ping     | 用于测试连通性，直接ping的目标地址                |

注：nslookup、ping、tracert都可以加上一个主机域名作为其命令参数来诊断DNS故障，nslookup还可以看到本地DNS服务器地址，rp命令是与arp记录有关，与DNS无关联。

#### 4.5 常见协议的默认端口

https：443

http：80